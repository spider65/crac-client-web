
document.addEventListener("DOMContentLoaded", function() {
    // Ottieni i dati JSON dal tag <script> con id "data-items"
    const gaugeData = JSON.parse(document.getElementById('data-items').textContent);
    
    // Crea una mappa degli ID dei gauges con i loro valori
    const gaugeDataMap = {};
    gaugeData.forEach(item => {
        gaugeDataMap[item.id] = item.value;
    });
    const gaugesConfig = [
        {
            id: "temperature-gauge",
            config: {
                renderTo: "temperature-gauge",
                type: "radial-gauge",
                width: 150,
                height: 150,
                units: "°C",
                title: "Temperatura",
                minValue: -50,
                maxValue: 50,
                majorTicks: [-50, -40, -30, -20, -10, 0, 10, 20, 30, 40, 50],
                minorTicks: 2,
                strokeTicks: true,
                highlights: [
                    { from: -50, to: 35, color: "rgba(63, 195, 128)" },
                    { from: 35, to: 50, color: "rgba(255,0,0,.3)" }
                ],
                ticksAngle: 270,
                startAngle: 45,
                colorMajorTicks: "#ddd",
                colorMinorTicks: "#ddd",
                colorTitle: "#eee",
                colorUnits: "#ccc",
                colorNumbers: "#eee",
                colorPlate: "#222",
                borderShadowWidth: 0,
                borders: true,
                needleType: "arrow",
                needleWidth: 2,
                needleCircleSize: 7,
                needleCircleOuter: true,
                needleCircleInner: false,
                animationDuration: 1500,
                animationRule: "linear",
                colorBorderOuter: "#333",
                colorBorderOuterEnd: "#111",
                colorBorderMiddle: "#222",
                colorBorderMiddleEnd: "#111",
                colorBorderInner: "#111",
                colorBorderInnerEnd: "#333",
                colorNeedleShadowDown: "#333",
                colorNeedleCircleOuter: "#333",
                colorNeedleCircleOuterEnd: "#111",
                colorNeedleCircleInner: "#111",
                colorNeedleCircleInnerEnd: "#222",
                valueBoxBorderRadius: 0,
                colorValueBoxRect: "#222",
                colorValueBoxRectEnd: "#333",
                value : gaugeDataMap['temperature-gauge'] || 0,
                titleText: "indicatore della temperatura esterna attuale"
            }
        },
        {
            id: "humidity-gauge",
            config: {
                renderTo: "humidity-gauge",
                type: "radial-gauge",
                width: 150,
                height: 150,
                units: "%",
                title: "Umidità",
                minValue: 0,
                maxValue: 100,
                majorTicks: [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100],
                minorTicks: 2,
                strokeTicks: true,
                highlights: [
                    { from: 0, to: 85, color: "rgba(63, 195, 128)" },
                    { from: 85, to: 90, color: "orange" },
                    { from: 90, to: 100, color: "red" }
                ],
                ticksAngle: 270,
                startAngle: 45,
                colorMajorTicks: "#ddd",
                colorMinorTicks: "#ddd",
                colorTitle: "#eee",
                colorUnits: "#ccc",
                colorNumbers: "#eee",
                colorPlate: "#222",
                borderShadowWidth: 0,
                borders: true,
                needleType: "arrow",
                needleWidth: 2,
                needleCircleSize: 7,
                needleCircleOuter: true,
                needleCircleInner: false,
                animationDuration: 1500,
                animationRule: "linear",
                colorBorderOuter: "#333",
                colorBorderOuterEnd: "#111",
                colorBorderMiddle: "#222",
                colorBorderMiddleEnd: "#111",
                colorBorderInner: "#111",
                colorBorderInnerEnd: "#333",
                colorNeedleShadowDown: "#333",
                colorNeedleCircleOuter: "#333",
                colorNeedleCircleOuterEnd: "#111",
                colorNeedleCircleInner: "#111",
                colorNeedleCircleInnerEnd: "#222",
                valueBoxBorderRadius: 0,
                colorValueBoxRect: "#222",
                colorValueBoxRectEnd: "#333",
                value: gaugeDataMap['humidity-gauge'] || 0,
                titleText: "indicatore della percentuale di umidità relativa attuale"
            }
        },
        {
            id: "wind-gauge",
            config: {
                renderTo: "wind-gauge",
                type: "radial-gauge",
                width: 150,
                height: 150,
                units: "m/s",
                title: "Vento",
                minValue: 0,
                maxValue: 50,
                majorTicks: [0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50],
                minorTicks: 2,
                strokeTicks: true,
                highlights: [
                    { from: 0, to: 10, color: "rgba(63, 195, 128)" },
                    { from: 10, to: 15, color: "orange" },
                    { from: 15, to: 50, color: "red" }
                ],
                ticksAngle: 270,
                startAngle: 45,
                colorMajorTicks: "#ddd",
                colorMinorTicks: "#ddd",
                colorTitle: "#eee",
                colorUnits: "#ccc",
                colorNumbers: "#eee",
                colorPlate: "#222",
                borderShadowWidth: 0,
                borders: true,
                needleType: "arrow",
                needleWidth: 2,
                needleCircleSize: 7,
                needleCircleOuter: true,
                needleCircleInner: false,
                animationDuration: 1500,
                animationRule: "linear",
                colorBorderOuter: "#333",
                colorBorderOuterEnd: "#111",
                colorBorderMiddle: "#222",
                colorBorderMiddleEnd: "#111",
                colorBorderInner: "#111",
                colorBorderInnerEnd: "#333",
                colorNeedleShadowDown: "#333",
                colorNeedleCircleOuter: "#333",
                colorNeedleCircleOuterEnd: "#111",
                colorNeedleCircleInner: "#111",
                colorNeedleCircleInnerEnd: "#222",
                valueBoxBorderRadius: 2,
                colorValueBoxRect: "#222",
                colorValueBoxRectEnd: "#333",
                value: gaugeDataMap['wind-gauge'] || 0,
                titleText: "indicatore della velocità del vento"
            }
        },
        {
            id: "guest-wind-gauge",
            config: {
                renderTo: "guest-wind-gauge",
                type: "radial-gauge",
                width: 150,
                height: 150,
                units: "m/s",
                title: "Raffiche",
                minValue: 0,
                maxValue: 50,
                majorTicks: [0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50],
                minorTicks: 2,
                strokeTicks: true,
                highlights: [
                    { from: 0, to: 10, color: "rgba(63, 195, 128)" },
                    { from: 10, to: 15, color: "orange" },
                    { from: 15, to: 50, color: "red" }
                ],
                ticksAngle: 270,
                startAngle: 45,
                colorMajorTicks: "#ddd",
                colorMinorTicks: "#ddd",
                colorTitle: "#eee",
                colorUnits: "#ccc",
                colorNumbers: "#eee",
                colorPlate: "#222",
                borderShadowWidth: 0,
                borders: true,
                needleType: "arrow",
                needleWidth: 2,
                needleCircleSize: 7,
                needleCircleOuter: true,
                needleCircleInner: false,
                animationDuration: 1500,
                animationRule: "linear",
                colorBorderOuter: "#333",
                colorBorderOuterEnd: "#111",
                colorBorderMiddle: "#222",
                colorBorderMiddleEnd: "#111",
                colorBorderInner: "#111",
                colorBorderInnerEnd: "#333",
                colorNeedleShadowDown: "#333",
                colorNeedleCircleOuter: "#333",
                colorNeedleCircleOuterEnd: "#111",
                colorNeedleCircleInner: "#111",
                colorNeedleCircleInnerEnd: "#222",
                valueBoxBorderRadius: 2,
                colorValueBoxRect: "#222",
                colorValueBoxRectEnd: "#333",
                value: gaugeDataMap['guest-wind-gauge'] || 0,
                titleText: "indicatore della velocità delle raffiche di vento"
            }
        },
        {
            id: "barometer-gauge",
            config: {
                renderTo: "barometer-gauge",
                type: "radial-gauge",
                width: 150,
                height: 150,
                units: "mbar",
                title: "Pressione",
                minValue: 980,
                maxValue: 1050,
                majorTicks: [980, 990, 1000, 1010, 1020, 1030, 1040, 1050],
                minorTicks: 2,
                strokeTicks: true,
                highlights: [
                    { from: 980, to: 990, color: "red" },
                    { from: 990, to: 1015, color: "orange" },
                    { from: 1015, to: 1050, color: "rgba(63, 195, 128)" }
                ],
                ticksAngle: 270,
                startAngle: 45,
                colorMajorTicks: "#ddd",
                colorMinorTicks: "#ddd",
                colorTitle: "#eee",
                colorUnits: "#ccc",
                colorNumbers: "#eee",
                colorPlate: "#222",
                borderShadowWidth: 0,
                borders: true,
                needleType: "arrow",
                needleWidth: 2,
                needleCircleSize: 7,
                needleCircleOuter: true,
                needleCircleInner: false,
                animationDuration: 1500,
                animationRule: "linear",
                colorBorderOuter: "#333",
                colorBorderOuterEnd: "#111",
                colorBorderMiddle: "#222",
                colorBorderMiddleEnd: "#111",
                colorBorderInner: "#111",
                colorBorderInnerEnd: "#333",
                colorNeedleShadowDown: "#333",
                colorNeedleCircleOuter: "#333",
                colorNeedleCircleOuterEnd: "#111",
                colorNeedleCircleInner: "#111",
                colorNeedleCircleInnerEnd: "#222",
                valueBoxBorderRadius: 0,
                colorValueBoxRect: "#222",
                colorValueBoxRectEnd: "#333",
                value: gaugeDataMap['barometer-gauge'] || 0,
                titleText: "indicatore della pressione atmosferica attuale"
            }
        },
        {
            id: "rain-gauge",
            config: {
                renderTo: "rain-gauge",
                type: "radial-gauge",
                width: 150,
                height: 150,
                units: "mm/h",
                title: "Pioggia",
                minValue: 0,
                maxValue: 50,
                majorTicks: [0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50],
                minorTicks: 3,
                strokeTicks: true,
                highlights: [
                    { from: 0, to: 2, color: "orange" },
                    { from: 2, to: 50, color: "red" }
                ],
                ticksAngle: 270,
                startAngle: 45,
                colorMajorTicks: "#ddd",
                colorMinorTicks: "#ddd",
                colorTitle: "#eee",
                colorUnits: "#ccc",
                colorNumbers: "#eee",
                colorPlate: "#222",
                borderShadowWidth: 0,
                borders: true,
                needleType: "arrow",
                needleWidth: 3,
                needleCircleSize: 10,
                needleCircleOuter: true,
                needleCircleInner: true,
                animationDuration: 1500,
                animationRule: "linear",
                colorBorderOuter: "#333",
                colorBorderOuterEnd: "#111",
                colorBorderMiddle: "#222",
                colorBorderMiddleEnd: "#111",
                colorBorderInner: "#111",
                colorBorderInnerEnd: "#333",
                colorNeedleShadowDown: "#333",
                colorNeedleCircleOuter: "#333",
                colorNeedleCircleOuterEnd: "#111",
                colorNeedleCircleInner: "#111",
                colorNeedleCircleInnerEnd: "#222",
                valueBoxBorderRadius: 0,
                colorValueBoxRect: "#222",
                colorValueBoxRectEnd: "#333",
                value: gaugeDataMap['rain-gauge'] || 0,
                titleText: "indicatore del livello di pioggia"
            }
        }
    ];

    gaugesConfig.forEach(function(gauge) {
        new RadialGauge(gauge.config).draw();
    });
});
